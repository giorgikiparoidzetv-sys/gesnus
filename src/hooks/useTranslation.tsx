import { useState, useEffect, createContext, useContext, ReactNode } from "react";

type Language = "en" | "ka";

interface TranslationContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const TranslationContext = createContext<TranslationContextType | undefined>(undefined);

const translations = {
  en: {
    "nav.home": "Home",
    "nav.shop": "Shop", 
    "nav.about": "About",
    "nav.contact": "Contact",
    "nav.login": "Login",
    "nav.dashboard": "My Account",
    "nav.cart": "Cart",
    "nav.game": "Giveaway",
    "header.search": "Search products...",
    "auth.login": "Login",
    "auth.register": "Register",
    "auth.logout": "Logout",
    "auth.my_account": "My Account",
    "auth.forgot_password": "Forgot Password?",
    "auth.reset_password": "Reset Password",
    "auth.new_password": "New Password",
    "auth.confirm_password": "Confirm New Password",
    "auth.update_password": "Update Password",
    "home.hero.title": "Premium Online Snus Store",
    "home.hero.subtitle": "Discover high-quality snus and tobacco pouches from top brands",
    "home.hero.shop": "Start Shopping",
    "home.hero.learn": "Learn More",
    "home.bestsellers": "Bestsellers",
    "home.bestsellers.subtitle": "Our most popular snus products, loved by customers worldwide",
    "home.features.title": "Why Choose Us",
    "home.features.subtitle": "We're committed to providing the best snus shopping experience",
    "home.features.shipping": "Fast Shipping",
    "home.features.shipping.desc": "Free shipping on orders over $50. Express delivery available.",
    "home.features.quality": "Premium Quality",
    "home.features.quality.desc": "Authentic products from trusted brands. Quality guaranteed.",
    "home.features.support": "Customer Support", 
    "home.features.support.desc": "24/7 customer service. We're here to help with any questions.",
    "home.newsletter.title": "Stay Updated",
    "home.newsletter.subtitle": "Subscribe to our newsletter for exclusive offers, new product launches, and snus tips",
    "home.newsletter.placeholder": "Enter your email",
    "home.newsletter.subscribe": "Subscribe",
    "home.newsletter.success": "You've been successfully subscribed to our newsletter",
    "product.add_to_cart": "Add to Cart",
    "product.strength": "Strength",
    "product.nicotine": "Nicotine", 
    "product.category": "Category",
    "product.sku": "SKU",
    "product.quantity": "Quantity",
    "product.in_stock": "In Stock",
    "product.out_of_stock": "Out of Stock",
    "product.wishlist": "Wishlist",
    "product.share": "Share",
    "product.sale": "Sale",
    "product.save": "Save",
    "product.authentic": "Authentic Product",
    "product.fast_shipping": "Fast Shipping", 
    "product.easy_returns": "Easy Returns",
    "product.description": "Description",
    "product.details": "Product Details",
    "product.brand": "Brand",
    "product.currency": "Currency",
    "product.recommended": "You might also like",
    "product.not_found": "Product not found",
    "product.loading": "Loading...",
    "shop.title": "Shop All Products", 
    "shop.subtitle": "Discover our complete collection of premium snus products",
    "shop.search": "Search products...",
    "shop.all_brands": "All Brands",
    "shop.all_strengths": "All Strengths", 
    "shop.sort_by": "Sort by",
    "shop.most_popular": "Most Popular",
    "shop.price_low": "Price: Low to High",
    "shop.price_high": "Price: High to Low", 
    "shop.name_az": "Name A-Z",
    "shop.highest_rated": "Highest Rated",
    "shop.showing": "Showing",
    "shop.of": "of",
    "shop.products": "products",
    "shop.no_products": "No products found",
    "shop.no_products.desc": "Try adjusting your search or filter criteria",
    "shop.clear_filters": "Clear Filters",
    "shop.load_more": "Load More Products",
    "shop.view_all": "View All Products",
    "breadcrumb.home": "Home",
    "breadcrumb.shop": "Shop",
    "breadcrumb.general": "General",
    "cart.title": "Your Cart",
    "cart.empty": "Cart is empty",
    "cart.continue_shopping": "Continue Shopping",
    "cart.remove": "Remove",
    "cart.subtotal": "Subtotal",
    "cart.checkout": "Checkout",
    "cart.mini.view_cart": "View Cart",
    "cart.added": "Added to cart",
    "cart.added.desc": "has been added to your cart",
    "checkout.title": "Checkout",
    "checkout.processing": "Processing payment...",
    "order.success.title": "Order Successful!",
    "order.success.message": "Thank you for your purchase. Your order will be processed and shipped soon.",
    "order.success.continue": "Continue Shopping",
    "common.error": "Error",
    "common.success": "Success!",
    "common.coming_soon": "Will Be Soon",
    "common.loading": "Loading...",
    "search.error": "Search Error",
    "search.enter_term": "Please enter a search term", 
    "search.initiated": "Search initiated",
    "search.searching": "Searching for",
    "auth.logout_success": "Logged out",
    "auth.logout_success.desc": "You have been successfully logged out",
    "auth.logout_failed": "Logout failed",
    "auth.logout_failed.desc": "Please try again",
    "auth.invalid_email": "Please enter a valid email address",
    "contact.title": "Get in Touch",
    "contact.subtitle": "Have a question about our products or need assistance with your order? We're here to help and would love to hear from you.",
    "contact.info": "Contact Information", 
    "contact.email.title": "Email Us",
    "contact.email.desc": "We respond within 24 hours",
    "contact.phone.title": "Call Us",
    "contact.phone.desc": "24/7 Support Available",
    "contact.address.title": "Visit Us",
    "contact.address.content": "Tbilisi, Georgia",
    "contact.address.desc": "Showroom by appointment",
    "contact.hours.title": "Support Hours",
    "contact.hours.content": "24/7 Online Support",
    "contact.hours.desc": "Live chat available",
    "contact.form.title": "Send us a Message",
    "contact.form.subtitle": "Fill out the form below and we'll get back to you as soon as possible.",
    "contact.form.first_name": "First Name",
    "contact.form.last_name": "Last Name", 
    "contact.form.email": "Email Address",
    "contact.form.phone": "Phone Number",
    "contact.form.subject": "Subject",
    "contact.form.message": "Message",
    "contact.form.send": "Send Message",
    "contact.form.call": "Call Instead",
    "contact.business_hours": "Business Hours",
    "contact.support_hours": "Customer Support",
    "contact.office_hours": "Office Hours: 08:00 — 03:00",
    "contact.support_247": "24/7 Support Available",
    "contact.faq.title": "Frequently Asked Questions",
    "contact.faq.shipping": "Do you ship internationally?",
    "contact.faq.shipping.answer": "Yes, we ship to over 40 countries worldwide.",
    "contact.faq.time": "What are your shipping times?",
    "contact.faq.time.answer": "2-5 business days for EU, 5-10 days elsewhere.",
    "contact.faq.bulk": "Do you offer bulk discounts?",
    "contact.faq.bulk.answer": "Yes, contact us for bulk pricing options.",
    "meta.title": "GeSnus - Quality Tobacco Pouches Online",
    "meta.description": "Discover premium snus and tobacco pouches from top brands. Fast shipping, premium quality, and exceptional customer support.",
  },
  ka: {
    "nav.home": "მთავარი",
    "nav.shop": "მაღაზია", 
    "nav.about": "ჩვენ შესახებ",
    "nav.contact": "კონტაქტი",
    "nav.login": "შესვლა",
    "nav.dashboard": "ჩემი ანგარიში",
    "nav.cart": "კალათა",
    "nav.game": "გათამაშება",
    "header.search": "პროდუქტების ძიება...",
    "auth.login": "შესვლა",
    "auth.register": "რეგისტრაცია",
    "auth.logout": "გასვლა",
    "auth.my_account": "ჩემი ანგარიში",
    "auth.forgot_password": "დაგავიწყდათ პაროლი?",
    "auth.reset_password": "პაროლის განახლება",
    "auth.new_password": "ახალი პაროლი",
    "auth.confirm_password": "დაადასტურეთ ახალი პაროლი",
    "auth.update_password": "პაროლის განახლება",
    "home.hero.title": "პრემიუმ სნუსის ონლაინ მაღაზია",
    "home.hero.subtitle": "აღმოაჩინეთ ტოპ ბრენდების უმაღლესი ხარისხის სნუსი და თამბაქოს ჩანთები",
    "home.hero.shop": "დაიწყე შოპინგი",
    "home.hero.learn": "გაიგე მეტი",
    "home.bestsellers": "ყველაზე გაყიდვადი პროდუქტები",
    "home.bestsellers.subtitle": "ჩვენი ყველაზე პოპულარული სნუსის პროდუქტები, რომლებსაც მთელ მსოფლიოში მყიდველები უყვართ",
    "home.features.title": "რატომ აირჩიოთ ჩვენ",
    "home.features.subtitle": "ჩვენ მზად ვართ მოგიწოდოთ საუკეთესო სნუსის შოპინგის გამოცდილება",
    "home.features.shipping": "სწრაფი მიწოდება",
    "home.features.shipping.desc": "უფასო მიწოდება 50 დოლარზე მეტ შეკვეთებზე. ექსპრეს მიწოდება ხელმისაწვდომია.",
    "home.features.quality": "პრემიუმ ხარისხი",
    "home.features.quality.desc": "ნამდვილი პროდუქტები სანდო ბრენდებისგან. ხარისხი გარანტირებულია.",
    "home.features.support": "მომხმარებელთა მხარდაჭერა",
    "home.features.support.desc": "24/7 მომხმარებელთა მომსახურება. ჩვენ აქ ვართ ყველა კითხვაში დასახმარებლად.",
    "home.newsletter.title": "იყავით განახლებული",
    "home.newsletter.subtitle": "გამოიწერეთ ჩვენი სიახლეები ექსკლუზიური შეთავაზებებისთვის, ახალი პროდუქტების გამოშვებისა და სნუსის რჩევებისთვის",
    "home.newsletter.placeholder": "შეიყვანეთ თქვენი ელფოსტა",
    "home.newsletter.subscribe": "გამოწერა",
    "home.newsletter.success": "თქვენ წარმატებით გამოიწერეთ ჩვენი სიახლეები",
    "product.add_to_cart": "კალათაში დამატება",
    "product.strength": "ძალა",
    "product.nicotine": "ნიკოტინი",
    "product.category": "კატეგორია", 
    "product.sku": "SKU",
    "product.quantity": "რაოდენობა",
    "product.in_stock": "საწყობშია",
    "product.out_of_stock": "საწყობში არ არის",
    "product.wishlist": "სურვილების სია",
    "product.share": "გაზიარება",
    "product.sale": "ფასდაკლება",
    "product.save": "დაზოგა",
    "product.authentic": "ნამდვილი პროდუქტი",
    "product.fast_shipping": "სწრაფი მიწოდება",
    "product.easy_returns": "ადვილი დაბრუნება",
    "product.description": "აღწერილობა",
    "product.details": "პროდუქტის დეტალები",
    "product.brand": "ბრენდი",
    "product.currency": "ვალუტა",
    "product.recommended": "ასევე შეიძლება მოგეწონოთ",
    "product.not_found": "პროდუქტი ნაპოვნი არ არის",
    "product.loading": "იტვირთება...",
    "shop.title": "ყველა პროდუქტი",
    "shop.subtitle": "აღმოაჩინეთ ჩვენი მთლიანი კოლექცია პრემიუმ სნუსის პროდუქტების",
    "shop.search": "პროდუქტების ძიება...",
    "shop.all_brands": "ყველა ბრენდი",
    "shop.all_strengths": "ყველა ძალა",
    "shop.sort_by": "დალაგება",
    "shop.most_popular": "ყველაზე პოპულარული",
    "shop.price_low": "ფასი: დაბლიდან მაღლამდე",
    "shop.price_high": "ფასი: მაღლიდან დაბლამდე",
    "shop.name_az": "სახელი ა-ზ",
    "shop.highest_rated": "ყველაზე მაღალი რეიტინგით",
    "shop.showing": "ნაჩვენებია",
    "shop.of": "-დან",
    "shop.products": "პროდუქტი",
    "shop.no_products": "პროდუქტები ნაპოვნი არ არის",
    "shop.no_products.desc": "სცადეთ თქვენი ძიების ან ფილტრის კრიტერიუმების შეცვლა",
    "shop.clear_filters": "ფილტრების გასუფთავება",
    "shop.load_more": "მეტი პროდუქტის ჩატვირთვა",
    "shop.view_all": "ყველა პროდუქტის ნახვა",
    "breadcrumb.home": "მთავარი",
    "breadcrumb.shop": "მაღაზია",
    "breadcrumb.general": "ზოგადი",
    "cart.title": "თქვენი კალათა",
    "cart.empty": "კალათა ცარიელია",
    "cart.continue_shopping": "შოპინგის გაგრძელება",
    "cart.remove": "წაშლა",
    "cart.subtotal": "ჯამური",
    "cart.checkout": "გადახდა",
    "cart.mini.view_cart": "კალათის ნახვა",
    "cart.added": "კალათაში დაემატა",
    "cart.added.desc": "დაემატა თქვენს კალათაში",
    "checkout.title": "გადახდა",
    "checkout.processing": "გადახდის დამუშავება...",
    "order.success.title": "შეკვეთა წარმატებულია!",
    "order.success.message": "გმადლობთ შენაძენისთვის. თქვენი შეკვეთა დამუშავდება და მალე გამოგეგზავნებათ.",
    "order.success.continue": "შოპინგის გაგრძელება",
    "common.error": "შეცდომა",
    "common.success": "წარმატება!",
    "common.coming_soon": "მალე დაემატება",
    "common.loading": "იტვირთება...",
    "search.error": "ძიების შეცდომა",
    "search.enter_term": "გთხოვთ შეიყვანოთ ძიების ტერმინი",
    "search.initiated": "ძიება დაწყებულია",
    "search.searching": "ძიება",
    "auth.logout_success": "გამოვიდა",
    "auth.logout_success.desc": "თქვენ წარმატებით გამოხვედით",
    "auth.logout_failed": "გასვლა ვერ მოხერხდა",
    "auth.logout_failed.desc": "გთხოვთ ისევ სცადოთ",
    "auth.invalid_email": "გთხოვთ შეიყვანოთ სწორი ელფოსტის მისამართი",
    "contact.title": "დაგვიკავშირდით",
    "contact.subtitle": "გაქვთ კითხვა ჩვენი პროდუქტების შესახებ ან დახმარება სჭირდებათ შეკვეთაში? ჩვენ ვართ აქ დასახმარებლად და მოხარული ვარ თქვენგან მოსმენა.",
    "contact.info": "საკონტაქტო ინფორმაცია",
    "contact.email.title": "ელფოსტა",
    "contact.email.desc": "ვპასუხობთ 24 საათში",
    "contact.phone.title": "დაგვირეკეთ",
    "contact.phone.desc": "24/7 მხარდაჭერა",
    "contact.address.title": "მოსალოცად",
    "contact.address.content": "თბილისი, საქართველო",
    "contact.address.desc": "შოურუმი ნაწინასწარ შეთანხმებით",
    "contact.hours.title": "მხარდაჭერის საათები",
    "contact.hours.content": "24/7 ონლაინ მხარდაჭერა",
    "contact.hours.desc": "ლაივ ჩატი ხელმისაწვდომია",
    "contact.form.title": "გამოგვიგზავნეთ შეტყობინება",
    "contact.form.subtitle": "შეავსეთ ქვემოთ მოცემული ფორმა და ჩვენ მალე დაგიბრუნდებით.",
    "contact.form.first_name": "სახელი",
    "contact.form.last_name": "გვარი",
    "contact.form.email": "ელფოსტის მისამართი", 
    "contact.form.phone": "ტელეფონის ნომერი",
    "contact.form.subject": "თემა",
    "contact.form.message": "შეტყობინება",
    "contact.form.send": "შეტყობინების გაგზავნა",
    "contact.form.call": "ნაცვლად დარეკვა",
    "contact.business_hours": "სამუშაო საათები",
    "contact.support_hours": "მომხმარებელთა მხარდაჭერა",
    "contact.office_hours": "ოფისის საათები: 08:00 — 03:00",
    "contact.support_247": "24/7 მხარდაჭერა ხელმისაწვდომია",
    "contact.faq.title": "ხშირად დასმული კითხვები",
    "contact.faq.shipping": "ახორციელებთ საერთაშორისო მიწოდებას?",
    "contact.faq.shipping.answer": "დიახ, ვახორციელებთ მიწოდებას 40-ზე მეტ ქვეყანაში.",
    "contact.faq.time": "რა არის თქვენი მიწოდების ვადები?",
    "contact.faq.time.answer": "2-5 სამუშაო დღე ევროკავშირისთვის, 5-10 დღე სხვა ადგილებში.",
    "contact.faq.bulk": "გთავაზობთ ნაყარი ფასდაკლებებს?",
    "contact.faq.bulk.answer": "დიახ, დაგვიკავშირდით მასობრივი ფასების ვარიანტებისთვის.",
    "meta.title": "GeSnus - ხარისხიანი თამბაქოს ჩანთები ონლაინ",
    "meta.description": "აღმოაჩინეთ პრემიუმ სნუსი და თამბაქოს ჩანთები ტოპ ბრენდებისგან. სწრაფი მიწოდება, პრემიუმ ხარისხი და განსაკუთრებული მომხმარებელთა მხარდაჭერა.",
  },
};

export const TranslationProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguageState] = useState<Language>("en");

  useEffect(() => {
    const savedLanguage = localStorage.getItem("language") as Language;
    if (savedLanguage && (savedLanguage === "en" || savedLanguage === "ka")) {
      setLanguageState(savedLanguage);
      document.documentElement.lang = savedLanguage;
    } else {
      document.documentElement.lang = "en";
    }
  }, []);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem("language", lang);
    document.documentElement.lang = lang;
  };

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations[typeof language]] || key;
  };

  return (
    <TranslationContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </TranslationContext.Provider>
  );
};

export const useTranslation = () => {
  const context = useContext(TranslationContext);
  if (context === undefined) {
    throw new Error("useTranslation must be used within a TranslationProvider");
  }
  return context;
};